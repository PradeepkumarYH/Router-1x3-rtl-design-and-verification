The Router 1x3 design follows packet-based protocol and it receives the network packet from a source LAN using data_in on a byte-by-byte basis on active posedge of the clock,resetn is an active low synchronous reset.
The start of a new packet is indicated by asserting pkt_valid and the end of the current packet is indicated by de-asserting pkt_valid. The design stores the incoming packet inside a FIFO as per the address of the packet. The design has got 3 FIFOs for respective destination LANs.
During packet read operation, the destination LANs monitor vld_out_x(x can be 0,1,or 2), and then assert read_enb_x(x can be 0,1, or 2). The packet is read by the destination LANs using the channels data_out_x(x can be 0,1,or 2).
Sometimes, the router can enter into a busy state which is indicated by the signal busy. The busy signal is sent back to the source LAN so that the source has to wait to send the next byte of the packet.
To confirm the coorectness of the packet, received by the router, we have implemented an error detection mechanism i.e. parity check. If there is a mismatch in the parity byte sent by the source LAN and the internal parity calculated by the router, then the error signal is asserted. This error signal is sent back to the source LAN so that by monitoring the same, the source LAN can resend the packet.
This design can receive only 1 packet at a time,but 3 packets can be read simultaneously.
